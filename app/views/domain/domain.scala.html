@(currentDatabaseConnection: Environment.ConnectionName, relays: List[Domain], backupDomains: Option[List[Domain]], toggleFeature: Boolean, writeFeature: Boolean = false)(implicit errorMessages: List[ErrorMessage] = List.empty)

@import models._
@import helper._

@main(Some("Domains"), Some(currentDatabaseConnection)) {

	<h3>Domains</h3>

   <section>

		<h4>Relay domain</h4>

		<table class="table table-hover">
			<thead>
				<tr>
					<th>domain</th>
					<th>enabled</th>
					<th>transport</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				@for(domain <- relays){
				<tr>
					<td>
						@if(!domain.enabled){ <s> }
						<a href="@routes.DomainController.alias(currentDatabaseConnection,domain.name)">@domain.name</a>
						@if(!domain.enabled){ </s> }
					</td>
					<td>@domain.enabled</td>
					<td>
						@if(!domain.enabled){ <s> }
						@domain.transport
						@if(!domain.enabled){ </s> }
					</td>
					<td class="actions">
						@if(toggleFeature){
							@if(domain.enabled){
								@form(action=routes.DomainController.disable(currentDatabaseConnection,domain.name)){
									<button type="submit" title="disable" class="btn btn-xs btn-warning">d</button>
								}
							} else {
								@form(action=routes.DomainController.enable(currentDatabaseConnection,domain.name)){
									<button type="submit" title="enable" class="btn btn-xs btn-success">e</button>
								}
							}
						}
						@if(writeFeature){
							<button disabled title="remove" class="btn btn-xs btn-danger">x</button>
						}
					</td>
				</tr>
				}
			</tbody>
		</table>

		@if(writeFeature){
			<button disabled class="btn btn-sm col-sm-3 col-xs-3 btn-info">add relay</button>
		}

	</section>


	@for( backups <- backupDomains){

	   <section>

			<h4>Backed up domain</h4>

			<table class="table table-hover">
				<thead>
					<tr>
						<th>domain</th>
						<th>enabled</th>
						<th>transport</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@for(domain <- backups){
					<tr>
						<td>
							@if(!domain.enabled){ <s> }
							<a href="@routes.DomainController.alias(currentDatabaseConnection,domain.name)">@domain.name</a>
							@if(!domain.enabled){ </s> }
						</td>
						<td>@domain.enabled</td>
						<td>
							@if(!domain.enabled){ <s> }
							@domain.transport
							@if(!domain.enabled){ </s> }
						</td>
						<td class="actions">
							@if(toggleFeature){
								@if(domain.enabled){
									@form(action=routes.DomainController.disableBackup(currentDatabaseConnection,domain.name)){
										<button type="submit" title="disable" class="btn btn-xs btn-warning">d</button>
									}
								} else {
									@form(action=routes.DomainController.enableBackup(currentDatabaseConnection,domain.name)){
										<button type="submit" title="enable" class="btn btn-xs btn-success">e</button>
									}
								}
							}
							@if(writeFeature){
								<button disabled title="remove" class="btn btn-xs btn-danger">x</button>
							}
						</td>
					</tr>
					}
				</tbody>
			</table>

			@if(writeFeature){
				<button disabled class="btn btn-sm col-sm-3 col-xs-3 btn-info">add backup</button>
			}

		</section>
	}



}
